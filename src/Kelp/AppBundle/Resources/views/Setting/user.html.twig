{% extends 'KelpAppBundle::base.html.twig' %}

{% form_theme form_search '@KelpApp/Form/bootstrap_3_inline_layout.html.twig' %}

{% block content %}
    <h1>Setting User</h1>

    <div class="highlight">
        {{ form(form_search) }}

    </div>

    <div>
        <table class="table table-striped table-bordered 1table-condensed">
            <thead>
                <tr class="active">
                    <th> Username </th>
                    <th> Email </th>
                    <th> Last Login </th>
                    <th> Role </th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for key, user in search_result %}
                    <tr>
                        <td> {{ user.username|e }} </td>
                        <td> {{ user.email|e }} </td>
                        <td> {{ user.lastLogin|date("d/m/Y") }} </td>
                        <td> {% for role in user.roles %} {{ role }} {% endfor %}</td>
                        <td> {{ table_action[key]|raw }} </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="3" class="text-center"> No User Availaible </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% set modal_parameters = {
    delete_title: 'Suppression d\'un user',
    delete_question: 'Etes-vous s√ªr de vouloir supprimer cette user ?'
    } %}
    {% include'KelpAppBundle:Modal:modal_delete.html.twig' with modal_parameters only %}
{% endblock %}